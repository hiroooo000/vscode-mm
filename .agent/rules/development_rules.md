---
description: ユーザが定義したAntigravityの開発ルール
---

# Antigravity Development Rules

このファイルは、開発プロセスにおいて遵守すべきルールを定義します。

## 1. 設計と影響調査 (Design & Impact Analysis)
- ユーザの要求を分析し、変更が必要なファイルと影響範囲を特定する。
- `implementation_plan.md` を作成または更新し、具体的な変更内容と検証計画を記述する。
- **[重要]** 処理の追加や修正により、既存の実装に影響がないか（あるいは意図した通りの影響か）を必ず確認する。
- **[提案]** 修正対象のコード周辺に軽微な改善点（可読性の向上など）が見つかった場合は、ついでに修正してもよいかユーザに提案する（ボーイスカウト・ルール）。
- **[承認待ち]** ユーザに方針（設計・影響調査結果）を提示し、承認を得るまでコードの修正は **絶対に行わない**。

## 2. ブランチの確認 (Branch Check)
- **[確認]** コード修正を開始する前に、ユーザにブランチを作成するか、現在のブランチを使用するかを必ず確認する。

## 3. 実装とテスト (Implementation & Testing)
- **[テスト追加]** 新しい処理を追加した際は、必ずテストコードを追加する。
- **[テスト修正]** 処理の修正を行った場合、必要に応じてテストコードを追加・修正する。
- 実装を行う。
- **[ドキュメント]** 仕様変更や機能追加を行った際は、関連するドキュメント（README, JSDoc, コメント等）を更新する。

## 4. 検証 (Verification)
- **[Lint]** コード修正後は必ずLintを実行し、新たなエラーや警告が発生していないことを確認する。
- **[実行]** 必ずテストを実行し、変更が正しく動作し、既存の機能を壊していないことを確認する。

## 5. コマンド実行 (Command Execution)
- **[Git結合制限]** `git` コマンドと **Git以外のコマンド** を `&&` で接続して実行することを禁止する（例: `npm test && git commit` は不可）。これらは性質が異なるため、予期せぬエラー時の対処や確認を確実にするために分離して実行すること。
- **[許可]** `git` コマンド同士を `&&` で接続すること（例: `git add . && git commit`）は **許可** する。
